<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secretos de la biblioteca est√°ndar de Python</title>

    <!-- Reveal.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/theme/moon.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/highlight/monokai.css">

    <!-- Pyodide para ejecutar Python -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>

    <!-- Estilos personalizados -->
    <style>
        .reveal .slides section {
            text-align: left;
        }

        .reveal .slides section h1,
        .reveal .slides section h2,
        .reveal .slides section h3 {
            text-align: center;
        }

        .reveal .slides section .center {
            text-align: center;
        }

        .code-container {
            position: relative;
            margin: 10px 0;
        }

        .run-button {
            background: linear-gradient(135deg, #e91e63, #ad1457);
            color: white;
            border: 2px solid #f8bbd9;
            padding: 12px 24px;
            border-radius: 0px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 15px auto;
            display: block;
            width: 200px;
            box-shadow: 0 8px 16px rgba(233, 30, 99, 0.4), 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .run-button:hover {
            background: linear-gradient(135deg, #c2185b, #880e4f);
            transform: translateY(-3px);
            box-shadow: 0 12px 24px rgba(233, 30, 99, 0.5), 0 6px 12px rgba(0, 0, 0, 0.4);
            border-color: #fce4ec;
        }

        .run-button:active {
            transform: translateY(-1px);
            box-shadow: 0 6px 12px rgba(233, 30, 99, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .output {
            background: #1e1e1e;
            color: #00ff00;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
            font-family: monospace;
            font-size: 14px;
            white-space: pre-wrap;
            min-height: 20px;
            border: 1px solid #333;
        }

        .loading {
            color: #ffa500;
        }

        .error {
            color: #ff6b6b;
        }

        .two-column {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .column {
            flex: 1;
        }
    </style>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <!-- SLIDE 1: T√çTULO -->
            <section>
                <h1>Secretos de la biblioteca est√°ndar de Python</h1>
                <h3>8 caracter√≠sticas √∫nicas que otros lenguajes no tienen</h3>
                <p class="center">
                    <small>Funcionalidades poderosas incluidas "de serie" en Python</small>
                </p>
            </section>

            <!-- SLIDE 2: AGENDA PARTE 1 -->
            <section>
                <h2>Agenda - Parte I</h2>
                <h4 class="center">Herramientas de Combinatorias y Optimizaci√≥n</h4>

                <div style="margin-top: 50px;">
                    <div class="fragment"
                        style="background: linear-gradient(135deg, #1e3c72, #2a5298); padding: 15px 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #4CAF50;">
                        <h4 style="color: #FFD700; margin: 0; font-size: 1.2em;">üßÆ itertools</h4>
                        <p style="color: white; margin: 5px 0; font-size: 1em;">√Ålgebra de iteradores - combinatorias
                            eficientes</p>
                        <small style="color: #B0BEC5; font-size: 0.8em;">Permutaciones, combinaciones y generadores
                            infinitos</small>
                    </div>

                    <div class="fragment"
                        style="background: linear-gradient(135deg, #2d8659, #3a9d6f); padding: 15px 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #FF9800;">
                        <h4 style="color: #FFD700; margin: 0; font-size: 1.2em;">‚ö° functools</h4>
                        <p style="color: white; margin: 5px 0; font-size: 1em;">Programaci√≥n funcional y optimizaci√≥n
                            autom√°tica</p>
                        <small style="color: #B0BEC5; font-size: 0.8em;">Memoizaci√≥n, funciones parciales y
                            decoradores</small>
                    </div>
                </div>

                <div class="center" style="margin-top: 40px;">
                    <p style="color: #888; font-size: 0.9em;">1 de 4</p>
                </div>
            </section>

            <!-- SLIDE 3: AGENDA PARTE 2 -->
            <section>
                <h2>Agenda - Parte II</h2>
                <h4 class="center">Contenedores y Gesti√≥n de Recursos</h4>

                <div style="margin-top: 50px;">
                    <div class="fragment"
                        style="background: linear-gradient(135deg, #8e24aa, #ab47bc); padding: 15px 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #E91E63;">
                        <h4 style="color: #FFD700; margin: 0; font-size: 1.2em;">üì¶ collections</h4>
                        <p style="color: white; margin: 5px 0; font-size: 1em;">Contenedores especializados m√°s all√° de
                            dict/list</p>
                        <small style="color: #B0BEC5; font-size: 0.8em;">Counter, defaultdict, deque y
                            namedtuple</small>
                    </div>

                    <div class="fragment"
                        style="background: linear-gradient(135deg, #d84315, #ff5722); padding: 15px 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #607D8B;">
                        <h4 style="color: #FFD700; margin: 0; font-size: 1.2em;">üîí contextlib</h4>
                        <p style="color: white; margin: 5px 0; font-size: 1em;">Gesti√≥n elegante de recursos y
                            excepciones</p>
                        <small style="color: #B0BEC5; font-size: 0.8em;">Context managers y limpieza autom√°tica</small>
                    </div>
                </div>

                <div class="center" style="margin-top: 40px;">
                    <p style="color: #888; font-size: 0.9em;">2 de 4</p>
                </div>
            </section>

            <!-- SLIDE 4: AGENDA PARTE 3 -->
            <section>
                <h2>Agenda - Parte III</h2>
                <h4 class="center">Datos y Estad√≠sticas</h4>

                <div style="margin-top: 50px;">
                    <div class="fragment"
                        style="background: linear-gradient(135deg, #4527a0, #5e35b1); padding: 15px 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #3F51B5;">
                        <h4 style="color: #FFD700; margin: 0; font-size: 1.2em;">üèóÔ∏è dataclasses</h4>
                        <p style="color: white; margin: 5px 0; font-size: 1em;">Clases de datos autom√°ticas sin c√≥digo
                            repetitivo</p>
                        <small style="color: #B0BEC5; font-size: 0.8em;">Generaci√≥n autom√°tica de __init__, __repr__ y
                            m√°s</small>
                    </div>

                    <div class="fragment"
                        style="background: linear-gradient(135deg, #00695c, #00897b); padding: 15px 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #009688;">
                        <h4 style="color: #FFD700; margin: 0; font-size: 1.2em;">üìä statistics</h4>
                        <p style="color: white; margin: 5px 0; font-size: 1em;">Estad√≠stica descriptiva sin librer√≠as
                            externas</p>
                        <small style="color: #B0BEC5; font-size: 0.8em;">Media, mediana, desviaci√≥n est√°ndar y
                            cuartiles</small>
                    </div>
                </div>

                <div class="center" style="margin-top: 40px;">
                    <p style="color: #888; font-size: 0.9em;">3 de 4</p>
                </div>
            </section>

            <!-- SLIDE 5: AGENDA PARTE 4 -->
            <section>
                <h2>Agenda - Parte IV</h2>
                <h4 class="center">An√°lisis y Metaprogramaci√≥n</h4>

                <div style="margin-top: 50px;">
                    <div class="fragment"
                        style="background: linear-gradient(135deg, #bf360c, #d84315); padding: 15px 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #FF5722;">
                        <h4 style="color: #FFD700; margin: 0; font-size: 1.2em;">üîç difflib</h4>
                        <p style="color: white; margin: 5px 0; font-size: 1em;">Comparaci√≥n inteligente de secuencias y
                            texto</p>
                        <small style="color: #B0BEC5; font-size: 0.8em;">Similitud textual y sistemas de
                            sugerencias</small>
                    </div>

                    <div class="fragment"
                        style="background: linear-gradient(135deg, #1565c0, #1976d2); padding: 15px 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #2196F3;">
                        <h4 style="color: #FFD700; margin: 0; font-size: 1.2em;">üî¨ inspect</h4>
                        <p style="color: white; margin: 5px 0; font-size: 1em;">Introspecci√≥n profunda de objetos en
                            tiempo de ejecuci√≥n</p>
                        <small style="color: #B0BEC5; font-size: 0.8em;">Metaprogramaci√≥n y an√°lisis din√°mico de
                            c√≥digo</small>
                    </div>
                </div>

                <div class="center" style="margin-top: 20px;">
                    <p style="color: #888; font-size: 0.9em;">4 de 4</p>
                </div>
            </section>

            <!-- SECCI√ìN 1: ITERTOOLS -->
            <section>
                <!-- Pregunta provocativa -->
                <section>
                    <h2>¬øCu√°nto c√≥digo escribes para generar todas las combinaciones posibles?</h2>
                    <div class="center">
                        <p class="fragment">¬øY si te dijera que Python puede hacerlo en una l√≠nea?</p>
                    </div>
                </section>

                <!-- Introducci√≥n al m√≥dulo -->
                <section>
                    <h2>itertools</h2>
                    <p>√Ålgebra de iteradores - herramientas combinatorias eficientes</p>
                </section>

                <!-- Base te√≥rica -->
                <section>
                    <h3>¬øPor qu√© es crucial la eficiencia en combinatorias?</h3>
                    <ul>
                        <li class="fragment"><strong>Explosi√≥n combinatoria:</strong> El n√∫mero de combinaciones crece
                            exponencialmente</li>
                        <li class="fragment"><strong>Memoria limitada:</strong> Generar todas las combinaciones en
                            memoria puede ser imposible</li>
                        <li class="fragment"><strong>Lazy evaluation:</strong> Los iteradores generan elementos bajo
                            demanda</li>
                        <li class="fragment"><strong>Composabilidad:</strong> Se pueden combinar operaciones sin
                            almacenamiento intermedio</li>
                    </ul>
                </section>

                <section>
                    <h3>El poder de los generadores infinitos</h3>
                    <div class="two-column">
                        <div class="column">
                            <h4>Enfoque tradicional</h4>
                            <ul>
                                <li>Generar todas las combinaciones</li>
                                <li>Almacenar en listas</li>
                                <li>Consumir memoria exponencialmente</li>
                                <li>Limitado por RAM disponible</li>
                            </ul>
                        </div>
                        <div class="column">
                            <h4>Enfoque itertools</h4>
                            <ul>
                                <li>Generar bajo demanda</li>
                                <li>Usar iteradores lazy</li>
                                <li>Memoria constante O(1)</li>
                                <li>Escalable infinitamente</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Ejemplo 1: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
import itertools

# Todas las permutaciones de una lista
elementos = [1, 2, 3]
print("Permutaciones:")
for perm in itertools.permutations(elementos):
    print(perm)

print(f"\nTotal de permutaciones: {len(list(itertools.permutations(elementos)))}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 2: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
import itertools

# Producto cartesiano - todas las combinaciones posibles
colores = ['rojo', 'azul', 'verde']
tama√±os = ['S', 'M', 'L', 'XL']
estilos = ['casual', 'formal']

print("Cat√°logo completo de productos:")
contador = 0
for combo in itertools.product(colores, tama√±os, estilos):
    contador += 1
    print(f"{contador:2d}. Camiseta {combo[0]} talla {combo[1]} estilo {combo[2]}")

print(f"\nTotal de productos √∫nicos: {contador}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 3: Caso avanzado -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
import itertools

# Generaci√≥n de contrase√±as seguras con combinaciones
letras = 'abcdefgh'
numeros = '1234'

print("Primeras 10 contrase√±as de 4 caracteres:")
contador = 0
for password in itertools.product(letras + numeros, repeat=4):
    if contador >= 10:
        break
    password_str = ''.join(password)
    print(f"Contrase√±a {contador+1}: {password_str}")
    contador += 1

# Calcular total posible sin generar todas
total_posible = len(letras + numeros) ** 4
print(f"\nTotal de contrase√±as posibles: {total_posible:,}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>
            </section>

            <!-- SECCI√ìN 2: FUNCTOOLS -->
            <section>
                <!-- Pregunta provocativa -->
                <section>
                    <h2>¬øCu√°ntas veces calculas lo mismo sin darte cuenta?</h2>
                    <div class="center">
                        <p class="fragment">¬øY si Python pudiera recordar autom√°ticamente?</p>
                    </div>
                </section>

                <!-- Introducci√≥n al m√≥dulo -->
                <section>
                    <h2>functools</h2>
                    <p>Programaci√≥n funcional y optimizaci√≥n autom√°tica</p>
                </section>

                <!-- Base te√≥rica -->
                <section>
                    <h3>El costo oculto de la redundancia computacional</h3>
                    <ul>
                        <li class="fragment"><strong>Complejidad exponencial:</strong> Algoritmos recursivos recalculan
                            subproblemas</li>
                        <li class="fragment"><strong>Principio de Bellman:</strong> Problemas con subestructura √≥ptima
                        </li>
                        <li class="fragment"><strong>Memoizaci√≥n:</strong> Intercambiar memoria por tiempo de CPU</li>
                        <li class="fragment"><strong>Transparencia:</strong> Optimizaci√≥n sin cambiar la l√≥gica</li>
                    </ul>
                </section>

                <section>
                    <h3>Programaci√≥n funcional: Composici√≥n elegante</h3>
                    <div class="two-column">
                        <div class="column">
                            <h4>Problemas comunes</h4>
                            <ul>
                                <li>Funciones con argumentos fijos</li>
                                <li>Configuraci√≥n repetitiva</li>
                                <li>C√≥digo duplicado</li>
                                <li>Dif√≠cil reutilizaci√≥n</li>
                            </ul>
                        </div>
                        <div class="column">
                            <h4>Soluci√≥n functools</h4>
                            <ul>
                                <li>Aplicaci√≥n parcial</li>
                                <li>Composici√≥n de funciones</li>
                                <li>Funciones de orden superior</li>
                                <li>Reutilizaci√≥n elegante</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Ejemplo 1: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from functools import lru_cache
import time

# Sin memoizaci√≥n - lento
def fibonacci_lento(n):
    if n < 2:
        return n
    return fibonacci_lento(n-1) + fibonacci_lento(n-2)

# Con memoizaci√≥n autom√°tica - r√°pido
@lru_cache(maxsize=None)
def fibonacci_rapido(n):
    if n < 2:
        return n
    return fibonacci_rapido(n-1) + fibonacci_rapido(n-2)

# Comparaci√≥n de rendimiento
n = 30
print(f"Calculando fibonacci({n})...")

start = time.time()
resultado_lento = fibonacci_lento(n)
tiempo_lento = time.time() - start

start = time.time()
resultado_rapido = fibonacci_rapido(n)
tiempo_rapido = time.time() - start

print(f"Sin cach√©: {resultado_lento} en {tiempo_lento:.4f} segundos")
print(f"Con cach√©: {resultado_rapido} en {tiempo_rapido:.4f} segundos")
print(f"Aceleraci√≥n: {tiempo_lento/tiempo_rapido:.1f}x m√°s r√°pido")
print(f"Info del cach√©: {fibonacci_rapido.cache_info()}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 2: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from functools import partial

# Funci√≥n base gen√©rica
def calcular_precio(precio_base, descuento, impuesto, envio=0):
    precio_con_descuento = precio_base * (1 - descuento)
    precio_con_impuesto = precio_con_descuento * (1 + impuesto)
    return precio_con_impuesto + envio

# Crear calculadoras especializadas para diferentes regiones
calcular_precio_mexico = partial(calcular_precio, descuento=0.1, impuesto=0.16)
calcular_precio_argentina = partial(calcular_precio, descuento=0.05, impuesto=0.21)
calcular_precio_envio_gratis = partial(calcular_precio_mexico, envio=0)

# Usar las funciones especializadas
producto_precio = 100

print("Precios por regi√≥n:")
print(f"M√©xico: ${calcular_precio_mexico(producto_precio):.2f}")
print(f"Argentina: ${calcular_precio_argentina(producto_precio):.2f}")
print(f"M√©xico (env√≠o gratis): ${calcular_precio_envio_gratis(producto_precio):.2f}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 3: Caso avanzado -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from functools import reduce, wraps
import time

# Decorator personalizado para medir tiempo
def cronometrar(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        inicio = time.time()
        resultado = func(*args, **kwargs)
        fin = time.time()
        print(f"{func.__name__} ejecutado en {fin-inicio:.4f} segundos")
        return resultado
    return wrapper

# Uso de reduce para operaciones complejas
@cronometrar
def calcular_estadisticas(numeros):
    # Suma usando reduce
    suma = reduce(lambda a, b: a + b, numeros)
    
    # Producto usando reduce
    producto = reduce(lambda a, b: a * b, numeros, 1)
    
    # Encontrar m√°ximo usando reduce
    maximo = reduce(lambda a, b: a if a > b else b, numeros)
    
    return {
        'suma': suma,
        'producto': producto,
        'maximo': maximo,
        'promedio': suma / len(numeros)
    }

datos = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
estadisticas = calcular_estadisticas(datos)

print("Estad√≠sticas calculadas:")
for clave, valor in estadisticas.items():
    print(f"  {clave}: {valor}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>
            </section>

            <!-- SECCI√ìN 3: COLLECTIONS -->
            <section>
                <!-- Pregunta provocativa -->
                <section>
                    <h2>¬øCu√°ntas l√≠neas escribes para manejar casos especiales en diccionarios?</h2>
                    <div class="center">
                        <p class="fragment">¬øY si existieran contenedores que manejan estos casos autom√°ticamente?</p>
                    </div>
                </section>

                <!-- Introducci√≥n al m√≥dulo -->
                <section>
                    <h2>collections</h2>
                    <p>Contenedores especializados m√°s all√° de list, dict y tuple</p>
                </section>

                <!-- Base te√≥rica -->
                <section>
                    <h3>M√°s all√° de las estructuras b√°sicas</h3>
                    <ul>
                        <li class="fragment"><strong>Casos de uso espec√≠ficos:</strong> No todo encaja en
                            list/dict/tuple</li>
                        <li class="fragment"><strong>C√≥digo repetitivo:</strong> Verificaciones constantes if key in
                            dict</li>
                        <li class="fragment"><strong>Eficiencia:</strong> Operaciones optimizadas para casos espec√≠ficos
                        </li>
                        <li class="fragment"><strong>Legibilidad:</strong> Expresar intenci√≥n claramente</li>
                    </ul>
                </section>

                <section>
                    <h3>El problema de la verificaci√≥n constante</h3>
                    <div class="two-column">
                        <div class="column">
                            <h4>C√≥digo tradicional</h4>
                            <pre style="font-size: 0.7em;"><code>
# Patr√≥n repetitivo
if key in diccionario:
    diccionario[key].append(valor)
else:
    diccionario[key] = [valor]

# Contar elementos
contador = {}
for item in lista:
    if item in contador:
        contador[item] += 1
    else:
        contador[item] = 1
                            </code></pre>
                        </div>
                        <div class="column">
                            <h4>Con collections</h4>
                            <pre style="font-size: 0.7em;"><code>
# Elegante y directo
diccionario[key].append(valor)

# Conteo autom√°tico
contador = Counter(lista)
                            </code></pre>
                        </div>
                    </div>
                </section>

                <!-- Ejemplo 1: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from collections import Counter

# An√°lisis de frecuencias en texto
texto = """
Python es un lenguaje de programaci√≥n interpretado cuya filosof√≠a hace 
hincapi√© en la legibilidad de su c√≥digo. Se trata de un lenguaje de 
programaci√≥n multiparadigma, ya que soporta orientaci√≥n a objetos, 
programaci√≥n imperativa y programaci√≥n funcional.
"""

# Limpiar y dividir en palabras
palabras = texto.lower().replace('\n', ' ').split()
palabras = [palabra.strip('.,()') for palabra in palabras if len(palabra) > 3]

contador_palabras = Counter(palabras)

print("An√°lisis de frecuencias de palabras:")
print(f"Total de palabras √∫nicas: {len(contador_palabras)}")
print(f"Total de palabras: {sum(contador_palabras.values())}")

print("\nPalabras m√°s frecuentes:")
for palabra, freq in contador_palabras.most_common(7):
    print(f"  '{palabra}': {freq} veces")

# Operaciones avanzadas con Counter
print(f"\nPalabras que aparecen solo una vez: {len([w for w, c in contador_palabras.items() if c == 1])}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 2: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from collections import defaultdict

# Agrupaci√≥n autom√°tica por categor√≠as
estudiantes_datos = [
    ("Ana", "Matem√°ticas", 95),
    ("Luis", "F√≠sica", 87),
    ("Mar√≠a", "Matem√°ticas", 92),
    ("Carlos", "Qu√≠mica", 89),
    ("Ana", "F√≠sica", 88),
    ("Luis", "Matem√°ticas", 91),
    ("Mar√≠a", "Qu√≠mica", 94)
]

# Agrupar calificaciones por estudiante autom√°ticamente
calificaciones_por_estudiante = defaultdict(list)
materias_por_estudiante = defaultdict(set)

for nombre, materia, calificacion in estudiantes_datos:
    calificaciones_por_estudiante[nombre].append(calificacion)
    materias_por_estudiante[nombre].add(materia)

print("Reporte acad√©mico:")
for estudiante in sorted(calificaciones_por_estudiante.keys()):
    califs = calificaciones_por_estudiante[estudiante]
    materias = materias_por_estudiante[estudiante]
    promedio = sum(califs) / len(califs)
    
    print(f"\n{estudiante}:")
    print(f"  Materias: {', '.join(sorted(materias))}")
    print(f"  Calificaciones: {califs}")
    print(f"  Promedio: {promedio:.1f}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 3: Caso avanzado -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from collections import namedtuple, deque, ChainMap

# namedtuple: Tuplas con nombres - m√°s legible que tuplas normales
Producto = namedtuple('Producto', ['nombre', 'precio', 'categoria', 'stock'])

productos = [
    Producto("Laptop", 1299.99, "Tecnolog√≠a", 15),
    Producto("Mouse", 25.50, "Tecnolog√≠a", 50),
    Producto("Libro Python", 45.00, "Educaci√≥n", 30)
]

print("Inventario de productos:")
for p in productos:
    print(f"  {p.nombre}: ${p.precio} ({p.stock} unidades)")

# deque: Cola eficiente para operaciones en ambos extremos
print("\nSimulaci√≥n de cola de atenci√≥n:")
cola_atencion = deque()

# Llegada de clientes
for cliente in ["Ana", "Luis", "Mar√≠a", "Carlos"]:
    cola_atencion.append(cliente)
    print(f"  {cliente} se uni√≥ a la cola")

# Atender clientes (FIFO)
print("\nAtendiendo clientes:")
while cola_atencion:
    cliente = cola_atencion.popleft()
    print(f"  Atendiendo a {cliente} (quedan {len(cola_atencion)} en cola)")

# ChainMap: Combinar m√∫ltiples diccionarios
config_default = {'debug': False, 'timeout': 30}
config_usuario = {'timeout': 60}
config_env = {'debug': True}

config_final = ChainMap(config_env, config_usuario, config_default)

print(f"\nConfiguraci√≥n final:")
for key, value in config_final.items():
    print(f"  {key}: {value}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>
            </section>

            <!-- SECCI√ìN 4: CONTEXTLIB -->
            <section>
                <!-- Pregunta provocativa -->
                <section>
                    <h2>¬øCu√°ntas veces olvidas cerrar un archivo o liberar un recurso?</h2>
                    <div class="center">
                        <p class="fragment">¬øY si Python pudiera garantizar la limpieza autom√°tica?</p>
                    </div>
                </section>

                <!-- Introducci√≥n al m√≥dulo -->
                <section>
                    <h2>contextlib</h2>
                    <p>Gesti√≥n elegante de recursos y excepciones</p>
                </section>

                <!-- Base te√≥rica -->
                <section>
                    <h3>El protocolo de context managers</h3>
                    <ul>
                        <li class="fragment"><strong>RAII Pattern:</strong> Resource Acquisition Is Initialization</li>
                        <li class="fragment"><strong>Garant√≠a de limpieza:</strong> Liberar recursos sin importar c√≥mo
                            termine</li>
                        <li class="fragment"><strong>Excepci√≥n segura:</strong> Cleanup incluso si hay errores</li>
                        <li class="fragment"><strong>C√≥digo m√°s limpio:</strong> Setup y teardown autom√°ticos</li>
                    </ul>
                </section>

                <section>
                    <h3>M√°s all√° de archivos: Gesti√≥n integral de recursos</h3>
                    <div class="two-column">
                        <div class="column">
                            <h4>Recursos que necesitan gesti√≥n</h4>
                            <ul>
                                <li>Archivos y streams</li>
                                <li>Conexiones de red</li>
                                <li>Locks y sem√°foros</li>
                                <li>Conexiones de BD</li>
                                <li>Medici√≥n de tiempo</li>
                                <li>Estados temporales</li>
                            </ul>
                        </div>
                        <div class="column">
                            <h4>Beneficios del protocolo</h4>
                            <ul>
                                <li>Sin memory leaks</li>
                                <li>C√≥digo m√°s robusto</li>
                                <li>F√°cil composici√≥n</li>
                                <li>Legibilidad mejorada</li>
                                <li>Menos bugs</li>
                                <li>Mantenimiento simple</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Ejemplo 1: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from contextlib import suppress

# Operaciones que pueden fallar de forma esperada
operaciones_riesgosas = [
    lambda: 10 / 2,    # √âxito
    lambda: 10 / 0,    # Divisi√≥n por cero
    lambda: int("abc"), # Conversi√≥n inv√°lida
    lambda: 10 / 4,    # √âxito
    lambda: eval("undefined_var"), # Variable no definida
]

resultados_exitosos = []
errores_encontrados = []

print("Ejecutando operaciones riesgosas...")
for i, operacion in enumerate(operaciones_riesgosas):
    print(f"Operaci√≥n {i+1}: ", end="")
    
    # Suprimir m√∫ltiples tipos de errores
    with suppress(ZeroDivisionError, ValueError, NameError):
        resultado = operacion()
        resultados_exitosos.append(resultado)
        print(f"√âxito -> {resultado}")
        continue
    
    # Si llegamos aqu√≠, hubo un error suprimido
    errores_encontrados.append(i+1)
    print("Error controlado")

print(f"\nResumen:")
print(f"Operaciones exitosas: {len(resultados_exitosos)}")
print(f"Errores controlados: {len(errores_encontrados)}")
print(f"Resultados: {resultados_exitosos}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 2: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from contextlib import contextmanager
import time

@contextmanager
def cronometro(descripcion="Operaci√≥n", mostrar_progreso=True):
    """Context manager para medir tiempo de ejecuci√≥n."""
    print(f"üöÄ Iniciando: {descripcion}")
    inicio = time.time()
    
    try:
        if mostrar_progreso:
            print("‚è≥ Ejecutando...")
        yield inicio  # Devolver el tiempo de inicio por si se necesita
    except Exception as e:
        print(f"‚ùå Error durante {descripcion}: {e}")
        raise
    finally:
        fin = time.time()
        duracion = fin - inicio
        print(f"‚úÖ Completado: {descripcion} en {duracion:.4f} segundos")

@contextmanager  
def cambiar_configuracion(variable, nuevo_valor):
    """Context manager para cambios temporales de configuraci√≥n."""
    import os
    valor_original = os.environ.get(variable)
    print(f"Cambiando {variable} de '{valor_original}' a '{nuevo_valor}'")
    os.environ[variable] = nuevo_valor
    
    try:
        yield
    finally:
        if valor_original is None:
            os.environ.pop(variable, None)
        else:
            os.environ[variable] = valor_original
        print(f"Restaurado {variable} a '{valor_original}'")

# Usar los context managers personalizados
with cronometro("C√°lculo intensivo"):
    resultado = sum(i**2 for i in range(100000))
    print(f"Suma de cuadrados: {resultado}")

with cambiar_configuracion("MODO_DEBUG", "True"):
    print("Ejecutando en modo debug")
    # Aqu√≠ el c√≥digo que necesita debug
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 3: Caso avanzado -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from contextlib import ExitStack, contextmanager
import tempfile
import os

@contextmanager
def archivo_temporal_con_contenido(contenido):
    """Context manager que crea un archivo temporal con contenido espec√≠fico."""
    with tempfile.NamedTemporaryFile(mode='w', delete=False) as f:
        f.write(contenido)
        temp_path = f.name
    
    try:
        yield temp_path
    finally:
        os.unlink(temp_path)
        print(f"Archivo temporal {temp_path} eliminado")

# ExitStack para manejar m√∫ltiples context managers din√°micamente
def procesar_multiples_archivos(contenidos):
    with ExitStack() as stack:
        archivos = []
        
        # Crear m√∫ltiples archivos temporales din√°micamente
        for i, contenido in enumerate(contenidos):
            archivo = stack.enter_context(
                archivo_temporal_con_contenido(contenido)
            )
            archivos.append(archivo)
            print(f"Archivo {i+1} creado: {archivo}")
        
        # Procesar todos los archivos
        print("\nProcesando archivos:")
        for i, archivo in enumerate(archivos):
            with open(archivo, 'r') as f:
                contenido = f.read()
                print(f"Archivo {i+1}: {len(contenido)} caracteres")
        
        return len(archivos)

# Usar el sistema de gesti√≥n m√∫ltiple
contenidos_ejemplo = [
    "Contenido del primer archivo\nCon m√∫ltiples l√≠neas",
    "Segundo archivo con datos diferentes",
    "Tercer archivo\nCon m√°s\nL√≠neas de texto"
]

archivos_procesados = procesar_multiples_archivos(contenidos_ejemplo)
print(f"\n‚úÖ Se procesaron {archivos_procesados} archivos correctamente")
print("Todos los recursos fueron liberados autom√°ticamente")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>
            </section>

            <!-- SECCI√ìN 5: DATACLASSES -->
            <section>
                <!-- Pregunta provocativa -->
                <section>
                    <h2>¬øCu√°ntas l√≠neas escribes para crear una clase simple que solo almacena datos?</h2>
                    <div class="center">
                        <p class="fragment">¬øY si Python pudiera generar todo ese c√≥digo autom√°ticamente?</p>
                    </div>
                </section>

                <!-- Introducci√≥n al m√≥dulo -->
                <section>
                    <h2>dataclasses</h2>
                    <p>Clases de datos autom√°ticas sin c√≥digo repetitivo</p>
                </section>

                <!-- Base te√≥rica -->
                <section>
                    <h3>El problema del c√≥digo boilerplate</h3>
                    <ul>
                        <li class="fragment"><strong>C√≥digo repetitivo:</strong> __init__, __repr__, __eq__ siempre
                            iguales</li>
                        <li class="fragment"><strong>Propenso a errores:</strong> Inconsistencias entre m√©todos</li>
                        <li class="fragment"><strong>Mantenimiento:</strong> Cambios en atributos requieren m√∫ltiples
                            updates</li>
                        <li class="fragment"><strong>Legibilidad:</strong> La intenci√≥n se pierde en implementaci√≥n</li>
                    </ul>
                </section>

                <section>
                    <h3>M√°s que clases: Tipos de datos ricos</h3>
                    <div class="two-column">
                        <div class="column">
                            <h4>Clase tradicional</h4>
                            <pre style="font-size: 0.6em;"><code>
class Persona:
    def __init__(self, nombre, edad, email):
        self.nombre = nombre
        self.edad = edad
        self.email = email
    
    def __repr__(self):
        return f"Persona(nombre='{self.nombre}', edad={self.edad}, email='{self.email}')"
    
    def __eq__(self, other):
        if not isinstance(other, Persona):
            return False
        return (self.nombre == other.nombre and 
                self.edad == other.edad and 
                self.email == other.email)
    
    def __hash__(self):
        return hash((self.nombre, self.edad, self.email))
                            </code></pre>
                        </div>
                        <div class="column">
                            <h4>Con dataclass</h4>
                            <pre style="font-size: 0.6em;"><code>
@dataclass
class Persona:
    nombre: str
    edad: int
    email: str
                            </code></pre>
                            <p style="font-size: 0.8em; margin-top: 1em;">
                                <strong>¬°15 l√≠neas vs 3 l√≠neas!</strong><br>
                                Funcionalidad id√©ntica generada autom√°ticamente
                            </p>
                        </div>
                    </div>
                </section>

                <!-- Ejemplo 1: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from dataclasses import dataclass, field
from typing import List

@dataclass
class Producto:
    nombre: str
    precio: float
    categoria: str = "General"
    tags: List[str] = field(default_factory=list)  # Lista mutable segura
    descuento: float = 0.0
    
    def precio_final(self) -> float:
        """M√©todo personalizado adicional."""
        return self.precio * (1 - self.descuento)
    
    def __post_init__(self):
        """Se ejecuta despu√©s de __init__ autom√°tico."""
        if self.precio < 0:
            raise ValueError("El precio no puede ser negativo")
        # Capitalizar el nombre autom√°ticamente
        self.nombre = self.nombre.title()

# Crear productos f√°cilmente
laptop = Producto("laptop gaming", 1299.99, "Tecnolog√≠a", ["gaming", "laptop"], 0.1)
mouse = Producto("mouse inal√°mbrico", 25.50, tags=["mouse", "inal√°mbrico"])

print("Productos creados:")
print(f"1. {laptop}")
print(f"   Precio final: ${laptop.precio_final():.2f}")
print(f"2. {mouse}")
print(f"   Precio final: ${mouse.precio_final():.2f}")

# Comparaci√≥n autom√°tica
laptop2 = Producto("Laptop Gaming", 1299.99, "Tecnolog√≠a", ["gaming", "laptop"], 0.1)
print(f"\n¬øSon iguales laptop y laptop2? {laptop == laptop2}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 2: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from dataclasses import dataclass, field
import json

@dataclass(frozen=True, order=True)  # Inmutable y ordenable
class Puntuacion:
    puntos: int = field(compare=True)   # Usado para ordenamiento
    jugador: str = field(compare=False)  # No usado para ordenamiento
    nivel: int = field(default=1, compare=False)
    timestamp: str = field(default="", compare=False)
    
    def to_dict(self):
        """Convertir a diccionario para JSON."""
        return {
            'jugador': self.jugador,
            'puntos': self.puntos,
            'nivel': self.nivel,
            'timestamp': self.timestamp
        }
    
    @classmethod
    def from_dict(cls, data):
        """Crear instancia desde diccionario."""
        return cls(**data)

# Crear tabla de puntuaciones
puntuaciones = [
    Puntuacion(1500, "Ana", 3, "2024-01-15"),
    Puntuacion(2000, "Luis", 5, "2024-01-16"), 
    Puntuacion(1200, "Mar√≠a", 2, "2024-01-14"),
    Puntuacion(2000, "Carlos", 4, "2024-01-17")  # Mismo puntaje que Luis
]

print("Tabla de puntuaciones (ordenada autom√°ticamente):")
for i, score in enumerate(sorted(puntuaciones, reverse=True), 1):
    print(f"{i:2d}. {score.jugador:8s} - {score.puntos:4d} pts (Nivel {score.nivel})")

# Serializaci√≥n f√°cil
print(f"\nSerializaci√≥n JSON:")
puntuaciones_json = [p.to_dict() for p in puntuaciones[:2]]
print(json.dumps(puntuaciones_json, indent=2))

# Las instancias son inmutables (frozen=True)
try:
    puntuaciones[0].puntos = 9999
except Exception as e:
    print(f"\nError esperado (inmutable): {type(e).__name__}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 3: Caso avanzado -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from dataclasses import dataclass, field, fields
from typing import ClassVar
import datetime

@dataclass
class ConfiguracionServidor:
    # Variables de clase (no instancia)
    VERSION: ClassVar[str] = "1.0.0"
    PUERTOS_PERMITIDOS: ClassVar[range] = range(8000, 9000)
    
    # Campos de instancia
    host: str = "localhost"
    puerto: int = 8080
    debug: bool = False
    max_conexiones: int = 100
    timeout: float = 30.0
    
    # Campo calculado autom√°ticamente
    creado_en: datetime.datetime = field(default_factory=datetime.datetime.now)
    
    # Campo que no aparece en repr
    secreto_api: str = field(default="", repr=False)
    
    def __post_init__(self):
        """Validaciones autom√°ticas despu√©s de creaci√≥n."""
        if self.puerto not in self.PUERTOS_PERMITIDOS:
            raise ValueError(f"Puerto {self.puerto} no est√° en rango permitido")
        
        if self.max_conexiones <= 0:
            raise ValueError("max_conexiones debe ser positivo")
    
    def info_campos(self):
        """Informaci√≥n detallada de todos los campos."""
        print(f"Configuraci√≥n del servidor v{self.VERSION}:")
        for campo in fields(self):
            if campo.name == 'secreto_api':
                valor = "***OCULTO***"
            else:
                valor = getattr(self, campo.name)
            
            tipo = campo.type.__name__ if hasattr(campo.type, '__name__') else str(campo.type)
            print(f"  {campo.name:15s}: {valor} ({tipo})")
    
    def exportar_config(self):
        """Exportar configuraci√≥n como diccionario (sin secretos)."""
        config = {}
        for campo in fields(self):
            if campo.name != 'secreto_api':
                config[campo.name] = getattr(self, campo.name)
        return config

# Crear configuraciones
config_desarrollo = ConfiguracionServidor(debug=True, puerto=8080, secreto_api="dev_secret_123")
config_produccion = ConfiguracionServidor(host="0.0.0.0", puerto=8443, max_conexiones=1000, secreto_api="prod_secret_xyz")

print("=== Configuraci√≥n de Desarrollo ===")
config_desarrollo.info_campos()

print(f"\n=== Configuraci√≥n Exportable ===")
import json
print(json.dumps(config_desarrollo.exportar_config(), indent=2, default=str))

# Validaci√≥n autom√°tica
try:
    config_invalida = ConfiguracionServidor(puerto=7000)  # Puerto fuera de rango
except ValueError as e:
    print(f"\n‚ùå Error de validaci√≥n: {e}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>
            </section>

            <!-- SECCI√ìN 6: STATISTICS -->
            <section>
                <!-- Pregunta provocativa -->
                <section>
                    <h2>¬øCu√°ntas librer√≠as instalas solo para calcular una media o desviaci√≥n est√°ndar?</h2>
                    <div class="center">
                        <p class="fragment">¬øY si Python ya tuviera todo lo necesario para estad√≠stica descriptiva?</p>
                    </div>
                </section>

                <!-- Introducci√≥n al m√≥dulo -->
                <section>
                    <h2>statistics</h2>
                    <p>Estad√≠stica descriptiva sin librer√≠as externas</p>
                </section>

                <!-- Base te√≥rica -->
                <section>
                    <h3>La estad√≠stica como herramienta de decisi√≥n</h3>
                    <ul>
                        <li class="fragment"><strong>An√°lisis exploratorio:</strong> Entender datos sin dependencias
                            externas</li>
                        <li class="fragment"><strong>Prototipado r√°pido:</strong> Validar hip√≥tesis sin setup complejo
                        </li>
                        <li class="fragment"><strong>Precisi√≥n num√©rica:</strong> Algoritmos num√©ricamente estables</li>
                        <li class="fragment"><strong>Casos espec√≠ficos:</strong> Medias especializadas para diferentes
                            contextos</li>
                    </ul>
                </section>

                <section>
                    <h3>M√°s all√° de la media simple</h3>
                    <div class="two-column">
                        <div class="column">
                            <h4>Tipos de problemas</h4>
                            <ul>
                                <li><strong>Velocidades promedio:</strong> Media arm√≥nica</li>
                                <li><strong>Tasas de crecimiento:</strong> Media geom√©trica</li>
                                <li><strong>Valores centrales:</strong> Mediana vs media</li>
                                <li><strong>Variabilidad:</strong> Desviaci√≥n est√°ndar</li>
                            </ul>
                        </div>
                        <div class="column">
                            <h4>Ventajas integradas</h4>
                            <ul>
                                <li>Sin dependencias externas</li>
                                <li>Algoritmos robustos</li>
                                <li>Manejo de edge cases</li>
                                <li>Performance optimizada</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Ejemplo 1: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
import statistics

# Datos de rendimiento de estudiantes en diferentes evaluaciones
evaluaciones = {
    "Matem√°ticas": [85, 92, 78, 96, 88, 79, 94, 87, 91, 83],
    "F√≠sica": [82, 89, 75, 93, 86, 81, 90, 84, 88, 80],
    "Qu√≠mica": [88, 91, 82, 95, 89, 85, 92, 86, 90, 87]
}

print("=== An√°lisis Estad√≠stico Completo ===")
for materia, calificaciones in evaluaciones.items():
    print(f"\n{materia}:")
    print(f"  Estudiantes evaluados: {len(calificaciones)}")
    print(f"  Media: {statistics.mean(calificaciones):.2f}")
    print(f"  Mediana: {statistics.median(calificaciones):.2f}")
    print(f"  Moda: {statistics.mode(calificaciones) if len(set(calificaciones)) < len(calificaciones) else 'Sin moda'}")
    print(f"  Rango: {max(calificaciones) - min(calificaciones)} puntos")
    print(f"  Desviaci√≥n est√°ndar: {statistics.stdev(calificaciones):.2f}")
    print(f"  Varianza: {statistics.variance(calificaciones):.2f}")

# Comparaci√≥n entre materias
todas_calificaciones = [cal for cals in evaluaciones.values() for cal in cals]
print(f"\n=== Estad√≠sticas Generales ===")
print(f"Total de evaluaciones: {len(todas_calificaciones)}")
print(f"Media general: {statistics.mean(todas_calificaciones):.2f}")
print(f"Mediana general: {statistics.median(todas_calificaciones):.2f}")
print(f"Cuartiles: Q1={statistics.quantiles(todas_calificaciones, n=4)[0]:.1f}, Q3={statistics.quantiles(todas_calificaciones, n=4)[2]:.1f}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 2: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
import statistics

# Casos donde diferentes tipos de media son apropiados

# 1. Media arm√≥nica - velocidades promedio
print("=== Media Arm√≥nica: Velocidades ===")
velocidades_segmentos = [60, 40, 80, 45, 70]  # km/h en diferentes segmentos
distancia_por_segmento = 10  # km cada segmento

# La media arm√≥nica es correcta para velocidades
velocidad_promedio_armonica = statistics.harmonic_mean(velocidades_segmentos)
tiempo_total = sum(distancia_por_segmento / v for v in velocidades_segmentos)
velocidad_promedio_real = (len(velocidades_segmentos) * distancia_por_segmento) / tiempo_total

print(f"Velocidades por segmento: {velocidades_segmentos} km/h")
print(f"Media aritm√©tica (INCORRECTA): {statistics.mean(velocidades_segmentos):.2f} km/h")
print(f"Media arm√≥nica (CORRECTA): {velocidad_promedio_armonica:.2f} km/h")
print(f"Velocidad real calculada: {velocidad_promedio_real:.2f} km/h")

# 2. Media geom√©trica - tasas de crecimiento
print(f"\n=== Media Geom√©trica: Crecimiento ===")
tasas_crecimiento_anual = [1.05, 1.08, 1.03, 1.12, 1.07]  # +5%, +8%, +3%, +12%, +7%
a√±os = len(tasas_crecimiento_anual)

crecimiento_promedio_geometrico = statistics.geometric_mean(tasas_crecimiento_anual)
crecimiento_total = 1
for tasa in tasas_crecimiento_anual:
    crecimiento_total *= tasa

print(f"Tasas anuales: {[(t-1)*100 for t in tasas_crecimiento_anual]} %")
print(f"Crecimiento promedio anual: {(crecimiento_promedio_geometrico-1)*100:.2f}%")
print(f"Crecimiento total en {a√±os} a√±os: {(crecimiento_total-1)*100:.2f}%")
print(f"Verificaci√≥n: {((crecimiento_promedio_geometrico**a√±os)-1)*100:.2f}%")

# 3. Mediana vs Media - datos con outliers
print(f"\n=== Mediana vs Media: Outliers ===")
salarios = [35000, 38000, 42000, 45000, 48000, 52000, 350000]  # Un salario extremo

print(f"Salarios: {salarios}")
print(f"Media (afectada por outlier): ${statistics.mean(salarios):,.2f}")
print(f"Mediana (robusta a outliers): ${statistics.median(salarios):,.2f}")
print(f"Media sin outlier: ${statistics.mean(salarios[:-1]):,.2f}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 3: Caso avanzado -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
import statistics
from collections import Counter

# An√°lisis estad√≠stico avanzado de datos de ventas
ventas_mensuales = [
    120, 135, 128, 142, 138, 155, 148, 162, 158, 145, 
    172, 168, 175, 182, 178, 195, 188, 205, 198, 210,
    185, 192, 187, 200, 195, 208, 202, 215, 218, 225
]

def analisis_estadistico_completo(datos, nombre="Dataset"):
    """Funci√≥n para an√°lisis estad√≠stico comprehensivo."""
    n = len(datos)
    
    # Medidas de tendencia central
    media = statistics.mean(datos)
    mediana = statistics.median(datos)
    try:
        moda = statistics.mode(datos)
    except statistics.StatisticsError:
        moda = "Sin moda √∫nica"
    
    # Medidas de dispersi√≥n
    rango = max(datos) - min(datos)
    desviacion = statistics.stdev(datos)
    varianza = statistics.variance(datos)
    
    # Cuartiles y percentiles
    cuartiles = statistics.quantiles(datos, n=4)
    deciles = statistics.quantiles(datos, n=10)
    
    # An√°lisis de distribuci√≥n
    q1, q2, q3 = cuartiles
    iqr = q3 - q1
    limite_inferior = q1 - 1.5 * iqr
    limite_superior = q3 + 1.5 * iqr
    
    outliers = [x for x in datos if x < limite_inferior or x > limite_superior]
    
    print(f"=== An√°lisis de {nombre} ===")
    print(f"Tama√±o de muestra: {n}")
    print(f"Rango de datos: [{min(datos)}, {max(datos)}]")
    
    print(f"\nTendencia Central:")
    print(f"  Media: {media:.2f}")
    print(f"  Mediana: {mediana:.2f}")
    print(f"  Moda: {moda}")
    
    print(f"\nDispersi√≥n:")
    print(f"  Rango: {rango}")
    print(f"  Desviaci√≥n est√°ndar: {desviacion:.2f}")
    print(f"  Varianza: {varianza:.2f}")
    print(f"  Coeficiente de variaci√≥n: {(desviacion/media)*100:.2f}%")
    
    print(f"\nDistribuci√≥n:")
    print(f"  Q1 (25%): {q1:.2f}")
    print(f"  Q2 (50%): {q2:.2f}")
    print(f"  Q3 (75%): {q3:.2f}")
    print(f"  IQR: {iqr:.2f}")
    
    if outliers:
        print(f"  Valores at√≠picos: {outliers}")
    else:
        print(f"  Sin valores at√≠picos detectados")
    
    # Percentiles espec√≠ficos
    print(f"\nPercentiles clave:")
    print(f"  P10: {deciles[0]:.2f}")
    print(f"  P90: {deciles[8]:.2f}")
    
    return {
        'media': media,
        'mediana': mediana,
        'desviacion': desviacion,
        'cuartiles': cuartiles,
        'outliers': outliers
    }

# Realizar an√°lisis completo
resultado = analisis_estadistico_completo(ventas_mensuales, "Ventas Mensuales")

# Comparar con subset de datos
ventas_ultimo_trimestre = ventas_mensuales[-9:]
print(f"\n" + "="*50)
resultado_trimestre = analisis_estadistico_completo(ventas_ultimo_trimestre, "√öltimo Trimestre")

# An√°lisis comparativo
print(f"\n=== Comparaci√≥n Temporal ===")
print(f"Crecimiento promedio: {((resultado_trimestre['media'] / resultado['media']) - 1) * 100:.2f}%")
print(f"Cambio en variabilidad: {((resultado_trimestre['desviacion'] / resultado['desviacion']) - 1) * 100:.2f}%")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>
            </section>

            <!-- SECCI√ìN 7: DIFFLIB -->
            <section>
                <!-- Pregunta provocativa -->
                <section>
                    <h2>¬øCu√°ntas veces has necesitado un "¬øquisiste decir?" en tu aplicaci√≥n?</h2>
                    <div class="center">
                        <p class="fragment">¬øY si Python pudiera calcular autom√°ticamente qu√© tan similares son dos
                            textos?</p>
                    </div>
                </section>

                <!-- Introducci√≥n al m√≥dulo -->
                <section>
                    <h2>difflib</h2>
                    <p>Comparaci√≥n inteligente de secuencias y texto</p>
                </section>

                <!-- Base te√≥rica -->
                <section>
                    <h3>Algoritmos de similitud: M√°s que comparaci√≥n simple</h3>
                    <ul>
                        <li class="fragment"><strong>Algoritmo de Ratcliff/Obershelp:</strong> Medici√≥n de similitud
                            robusta</li>
                        <li class="fragment"><strong>Longest Common Subsequence:</strong> Base matem√°tica s√≥lida</li>
                        <li class="fragment"><strong>Tolerancia a errores:</strong> UX mejorada en interfaces</li>
                        <li class="fragment"><strong>An√°lisis de cambios:</strong> Control de versiones y auditor√≠a</li>
                    </ul>
                </section>

                <section>
                    <h3>Aplicaciones pr√°cticas de similitud textual</h3>
                    <div class="two-column">
                        <div class="column">
                            <h4>Casos de uso comunes</h4>
                            <ul>
                                <li>Autocompletado inteligente</li>
                                <li>Correcci√≥n de comandos</li>
                                <li>Detecci√≥n de duplicados</li>
                                <li>B√∫squeda fuzzy</li>
                                <li>Sistemas de recomendaci√≥n</li>
                                <li>Control de versiones</li>
                            </ul>
                        </div>
                        <div class="column">
                            <h4>Ventajas del algoritmo</h4>
                            <ul>
                                <li>M√©trica normalizada (0-1)</li>
                                <li>Tolerante a transposiciones</li>
                                <li>Eficiente computacionalmente</li>
                                <li>Flexible para diferentes tipos</li>
                                <li>Extensible para casos espec√≠ficos</li>
                                <li>Sin dependencias externas</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Ejemplo 1: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from difflib import get_close_matches, SequenceMatcher

# Sistema de correcci√≥n de comandos para CLI
comandos_disponibles = [
    "listar", "crear", "eliminar", "modificar", "buscar", "actualizar",
    "exportar", "importar", "conectar", "desconectar", "configurar",
    "instalar", "desinstalar", "ejecutar", "detener", "reiniciar"
]

def corregir_comando(entrada, comandos, umbral=0.6, max_sugerencias=3):
    """Sistema inteligente de correcci√≥n de comandos."""
    # Buscar coincidencias exactas primero
    if entrada in comandos:
        return "exacto", [entrada]
    
    # Buscar coincidencias parciales
    sugerencias = get_close_matches(entrada, comandos, n=max_sugerencias, cutoff=umbral)
    
    if sugerencias:
        similitudes = []
        for sugerencia in sugerencias:
            ratio = SequenceMatcher(None, entrada.lower(), sugerencia.lower()).ratio()
            similitudes.append((sugerencia, ratio))
        
        # Ordenar por similitud
        similitudes.sort(key=lambda x: x[1], reverse=True)
        return "sugerencias", similitudes
    
    return "no_encontrado", []

# Casos de prueba con diferentes tipos de errores
casos_prueba = [
    "listar",      # Comando exacto
    "elimnar",     # Error de tipeo (falta i)
    "actualzar",   # Error de tipeo (z por i)
    "crar",        # Caracteres faltantes
    "exportarr",   # Caracter extra
    "buscarr",     # Caracter extra
    "xyz123"       # Comando inexistente
]

print("=== Sistema de Correcci√≥n de Comandos ===")
for entrada in casos_prueba:
    resultado, data = corregir_comando(entrada, comandos_disponibles)
    
    print(f"\nComando: '{entrada}'")
    if resultado == "exacto":
        print("  ‚úÖ Comando v√°lido")
    elif resultado == "sugerencias":
        print("  ‚ùì ¬øQuisiste decir?")
        for sugerencia, similitud in data:
            print(f"    ‚Ä¢ {sugerencia} (similitud: {similitud:.2%})")
    else:
        print("  ‚ùå Comando no reconocido")

# An√°lisis detallado de un caso
print(f"\n=== An√°lisis Detallado ===")
entrada_test = "actualzar"
comando_real = "actualizar"

matcher = SequenceMatcher(None, entrada_test, comando_real)
print(f"Entrada: '{entrada_test}'")
print(f"Objetivo: '{comando_real}'")
print(f"Similitud: {matcher.ratio():.2%}")

# Mostrar las operaciones necesarias
opcodes = matcher.get_opcodes()
print("Operaciones de transformaci√≥n:")
for tag, i1, i2, j1, j2 in opcodes:
    if tag == 'equal':
        print(f"  Mantener: '{entrada_test[i1:i2]}'")
    elif tag == 'replace':
        print(f"  Cambiar: '{entrada_test[i1:i2]}' ‚Üí '{comando_real[j1:j2]}'")
    elif tag == 'insert':
        print(f"  Insertar: '{comando_real[j1:j2]}'")
    elif tag == 'delete':
        print(f"  Eliminar: '{entrada_test[i1:i2]}'")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 2: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from difflib import SequenceMatcher, unified_diff
import datetime

# Sistema de detecci√≥n de cambios y similaridad
def calcular_similitud_detallada(texto1, texto2, incluir_analisis=True):
    """An√°lisis completo de similitud entre dos textos."""
    matcher = SequenceMatcher(None, texto1, texto2)
    ratio = matcher.ratio()
    
    resultado = {
        'similitud_total': ratio,
        'similitud_porcentaje': ratio * 100,
        'longitud_texto1': len(texto1),
        'longitud_texto2': len(texto2),
        'diferencia_longitud': abs(len(texto1) - len(texto2))
    }
    
    if incluir_analisis:
        # An√°lisis de bloques comunes
        bloques_comunes = matcher.get_matching_blocks()
        caracteres_comunes = sum(bloque.size for bloque in bloques_comunes)
        
        resultado.update({
            'caracteres_comunes': caracteres_comunes,
            'bloques_comunes': len(bloques_comunes) - 1,  # -1 porque el √∫ltimo es siempre dummy
            'subsecuencia_mas_larga': max((bloque.size for bloque in bloques_comunes), default=0)
        })
    
    return resultado

# Casos de prueba con diferentes niveles de similitud
casos_comparacion = [
    ("Python es genial", "Python es genial"),  # Id√©nticos
    ("Python es genial", "Python es genial!"),  # Casi id√©nticos
    ("Python es genial", "Java es genial"),     # Parcialmente similares
    ("Python es genial", "Python no es malo"),  # Estructura similar
    ("Python es genial", "Rust es r√°pido"),     # Muy diferentes
    ("", "Python es genial"),                   # Uno vac√≠o
    ("ABC", "CBA"),                            # Mismos caracteres, orden diferente
]

print("=== An√°lisis de Similitud Textual ===")
for i, (texto1, texto2) in enumerate(casos_comparacion, 1):
    print(f"\nCaso {i}:")
    print(f"  Texto 1: '{texto1}'")
    print(f"  Texto 2: '{texto2}'")
    
    analisis = calcular_similitud_detallada(texto1, texto2)
    
    print(f"  Similitud: {analisis['similitud_porcentaje']:.1f}%")
    print(f"  Caracteres comunes: {analisis['caracteres_comunes']}")
    print(f"  Diferencia de longitud: {analisis['diferencia_longitud']}")
    
    # Clasificaci√≥n de similitud
    if analisis['similitud_total'] >= 0.9:
        categoria = "Muy similares"
    elif analisis['similitud_total'] >= 0.7:
        categoria = "Similares"
    elif analisis['similitud_total'] >= 0.5:
        categoria = "Parcialmente similares"
    else:
        categoria = "Muy diferentes"
    
    print(f"  Categor√≠a: {categoria}")

# Detecci√≥n de cambios estilo diff
print(f"\n=== An√°lisis de Cambios (Diff) ===")
version_original = """def calcular_precio(base, descuento):
    precio_final = base * (1 - descuento)
    return precio_final"""

version_nueva = """def calcular_precio(base, descuento, impuesto=0.16):
    precio_con_descuento = base * (1 - descuento)
    precio_final = precio_con_descuento * (1 + impuesto)
    return precio_final"""

# Generar diff unificado
lineas_originales = version_original.splitlines(keepends=True)
lineas_nuevas = version_nueva.splitlines(keepends=True)

diff = list(unified_diff(
    lineas_originales, 
    lineas_nuevas,
    fromfile='version_original.py',
    tofile='version_nueva.py',
    lineterm=''
))

print("Cambios detectados:")
for linea in diff:
    print(f"  {linea}")

# Similitud entre versiones
similitud_versiones = SequenceMatcher(None, version_original, version_nueva).ratio()
print(f"\nSimilitud entre versiones: {similitud_versiones:.2%}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 3: Caso avanzado -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
from difflib import SequenceMatcher, get_close_matches
from collections import defaultdict

class SistemaSimilitudAvanzado:
    """Sistema avanzado de an√°lisis de similitud y recomendaciones."""
    
    def __init__(self, umbral_similitud=0.6):
        self.umbral = umbral_similitud
        self.historial_busquedas = []
        self.cache_similitudes = {}
    
    def _calcular_similitud_cached(self, texto1, texto2):
        """Calcula similitud con cach√© para optimizaci√≥n."""
        key = tuple(sorted([texto1, texto2]))
        if key not in self.cache_similitudes:
            self.cache_similitudes[key] = SequenceMatcher(None, texto1, texto2).ratio()
        return self.cache_similitudes[key]
    
    def buscar_productos_similares(self, consulta, catalogo):
        """B√∫squeda fuzzy en cat√°logo de productos."""
        self.historial_busquedas.append(consulta)
        
        resultados = []
        for producto in catalogo:
            similitud = self._calcular_similitud_cached(consulta.lower(), producto.lower())
            if similitud >= self.umbral:
                resultados.append((producto, similitud))
        
        # Ordenar por similitud descendente
        resultados.sort(key=lambda x: x[1], reverse=True)
        return resultados
    
    def detectar_duplicados(self, lista_textos, umbral_duplicado=0.85):
        """Detecta elementos duplicados o muy similares."""
        duplicados = defaultdict(list)
        procesados = set()
        
        for i, texto1 in enumerate(lista_textos):
            if texto1 in procesados:
                continue
                
            grupo_similares = [texto1]
            for j, texto2 in enumerate(lista_textos[i+1:], i+1):
                if texto2 in procesados:
                    continue
                    
                similitud = self._calcular_similitud_cached(texto1, texto2)
                if similitud >= umbral_duplicado:
                    grupo_similares.append(texto2)
                    procesados.add(texto2)
            
            if len(grupo_similares) > 1:
                duplicados[f"Grupo {len(duplicados) + 1}"] = grupo_similares
            
            procesados.add(texto1)
        
        return dict(duplicados)
    
    def sugerir_correccion_inteligente(self, entrada, opciones_validas):
        """Sistema de correcci√≥n con contexto del historial."""
        # Buscar coincidencias directas
        coincidencias = get_close_matches(entrada, opciones_validas, n=5, cutoff=0.3)
        
        if not coincidencias:
            return None
        
        # Mejorar sugerencias basadas en historial
        sugerencias_mejoradas = []
        for opcion in coincidencias:
            similitud_base = self._calcular_similitud_cached(entrada, opcion)
            
            # Bonus por frecuencia en historial
            frecuencia_bonus = self.historial_busquedas.count(opcion) * 0.1
            
            # Bonus por similitud con b√∫squedas recientes
            contexto_bonus = 0
            if len(self.historial_busquedas) > 0:
                for busqueda_previa in self.historial_busquedas[-3:]:  # √öltimas 3 b√∫squedas
                    similitud_contexto = self._calcular_similitud_cached(entrada, busqueda_previa)
                    if similitud_contexto > 0.5:
                        contexto_bonus += 0.05
            
            puntuacion_final = min(1.0, similitud_base + frecuencia_bonus + contexto_bonus)
            sugerencias_mejoradas.append((opcion, puntuacion_final, similitud_base))
        
        sugerencias_mejoradas.sort(key=lambda x: x[1], reverse=True)
        return sugerencias_mejoradas

# Demostraci√≥n del sistema avanzado
sistema = SistemaSimilitudAvanzado(umbral_similitud=0.4)

# Cat√°logo de productos para prueba
catalogo_productos = [
    "iPhone 14 Pro Max", "Samsung Galaxy S23", "Google Pixel 7", 
    "iPad Pro 12.9", "MacBook Air M2", "Dell XPS 13", 
    "Sony PlayStation 5", "Xbox Series X", "Nintendo Switch",
    "Apple Watch Series 8", "Samsung Galaxy Watch 5", "Fitbit Versa 4"
]

print("=== Sistema de Similitud Avanzado ===")

# Simulaci√≥n de b√∫squedas
consultas_test = ["iphone", "macbook", "playstation", "apple wach", "galaxy s23"]

for consulta in consultas_test:
    print(f"\nBuscando: '{consulta}'")
    resultados = sistema.buscar_productos_similares(consulta, catalogo_productos)
    
    if resultados:
        print("  Productos encontrados:")
        for producto, similitud in resultados[:3]:  # Top 3
            print(f"    ‚Ä¢ {producto} (similitud: {similitud:.2%})")
    else:
        print("  No se encontraron productos similares")

# Detecci√≥n de duplicados en lista
print(f"\n=== Detecci√≥n de Duplicados ===")
lista_con_duplicados = [
    "iPhone 14 Pro Max",
    "iphone 14 pro max",  # Duplicado con diferente capitalizaci√≥n
    "Samsung Galaxy S23",
    "Samsung galaxy s23",  # Duplicado similar
    "Google Pixel 7",
    "MacBook Air M2",
    "macbook air m2",     # Duplicado con diferente capitalizaci√≥n
    "Dell XPS 13"
]

duplicados = sistema.detectar_duplicados(lista_con_duplicados)
if duplicados:
    for grupo, elementos in duplicados.items():
        print(f"  {grupo}: {elementos}")
else:
    print("  No se detectaron duplicados")

# Sistema de correcci√≥n inteligente
print(f"\n=== Correcci√≥n Inteligente ===")
entrada_con_error = "aple wach"
sugerencias = sistema.sugerir_correccion_inteligente(entrada_con_error, catalogo_productos)

print(f"Entrada: '{entrada_con_error}'")
if sugerencias:
    print("Sugerencias (con contexto):")
    for producto, puntuacion_final, similitud_base in sugerencias[:3]:
        bonus = puntuacion_final - similitud_base
        print(f"  ‚Ä¢ {producto}")
        print(f"    Similitud base: {similitud_base:.2%}")
        print(f"    Bonus contexto: +{bonus:.2%}")
        print(f"    Puntuaci√≥n final: {puntuacion_final:.2%}")

print(f"\nCache de similitudes: {len(sistema.cache_similitudes)} entradas")
print(f"Historial de b√∫squedas: {sistema.historial_busquedas}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>
            </section>

            <!-- SECCI√ìN 8: INSPECT -->
            <section>
                <!-- Pregunta provocativa -->
                <section>
                    <h2>¬øCu√°ntas veces has necesitado saber qu√© hace exactamente una funci√≥n en tiempo de ejecuci√≥n?
                    </h2>
                    <div class="center">
                        <p class="fragment">¬øY si Python pudiera revelar todos los secretos de cualquier objeto?</p>
                    </div>
                </section>

                <!-- Introducci√≥n al m√≥dulo -->
                <section>
                    <h2>inspect</h2>
                    <p>Introspecci√≥n profunda de objetos en tiempo de ejecuci√≥n</p>
                </section>

                <!-- Base te√≥rica -->
                <section>
                    <h3>El poder de la metaprogramaci√≥n</h3>
                    <ul>
                        <li class="fragment"><strong>Reflection en Python:</strong> Capacidad de examinar y modificar
                            estructuras</li>
                        <li class="fragment"><strong>Debugging avanzado:</strong> Entender c√≥digo de terceros
                            din√°micamente</li>
                        <li class="fragment"><strong>Frameworks adaptativos:</strong> Comportamiento basado en
                            estructura</li>
                        <li class="fragment"><strong>Documentaci√≥n autom√°tica:</strong> Generar docs desde c√≥digo</li>
                    </ul>
                </section>

                <section>
                    <h3>Introspecci√≥n vs Reflexi√≥n</h3>
                    <div class="two-column">
                        <div class="column">
                            <h4>Informaci√≥n disponible</h4>
                            <ul>
                                <li>C√≥digo fuente completo</li>
                                <li>Jerarqu√≠a de herencia</li>
                                <li>Par√°metros y tipos</li>
                                <li>Decoradores aplicados</li>
                                <li>Ubicaci√≥n en archivos</li>
                                <li>Stack de ejecuci√≥n</li>
                            </ul>
                        </div>
                        <div class="column">
                            <h4>Casos de uso pr√°cticos</h4>
                            <ul>
                                <li>IDEs y editores inteligentes</li>
                                <li>Sistemas de validaci√≥n</li>
                                <li>Serializaci√≥n autom√°tica</li>
                                <li>Testing frameworks</li>
                                <li>Dependency injection</li>
                                <li>API documentation</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <!-- Ejemplo 1: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
import inspect
from typing import List, Optional, Union

def procesar_datos(datos: List[int], 
                  filtro: Optional[str] = None, 
                  limite: Union[int, None] = 100,
                  ordenar: bool = True,
                  **kwargs) -> dict:
    """
    Procesa una lista de datos con m√∫ltiples opciones.
    
    Args:
        datos: Lista de enteros a procesar
        filtro: Criterio de filtrado opcional  
        limite: N√∫mero m√°ximo de elementos (None = sin l√≠mite)
        ordenar: Si se debe ordenar el resultado
        **kwargs: Par√°metros adicionales
        
    Returns:
        Diccionario con estad√≠sticas de procesamiento
        
    Raises:
        ValueError: Si los datos est√°n vac√≠os
    """
    if not datos:
        raise ValueError("Los datos no pueden estar vac√≠os")
    
    resultado = {
        'total': len(datos),
        'procesados': min(len(datos), limite) if limite else len(datos),
        'ordenado': ordenar
    }
    
    return resultado

# An√°lisis completo de la funci√≥n
print("=== An√°lisis Introspectivo de Funci√≥n ===")

# Informaci√≥n b√°sica
print(f"Nombre: {procesar_datos.__name__}")
print(f"M√≥dulo: {procesar_datos.__module__}")
print(f"¬øEs funci√≥n? {inspect.isfunction(procesar_datos)}")

# Signatura detallada
sig = inspect.signature(procesar_datos)
print(f"\nSignatura completa: {sig}")

# An√°lisis de par√°metros
print(f"\nPar√°metros detallados:")
for param_name, param in sig.parameters.items():
    print(f"  {param_name}:")
    print(f"    Tipo: {param.annotation if param.annotation != inspect.Parameter.empty else 'Sin anotar'}")
    print(f"    Default: {param.default if param.default != inspect.Parameter.empty else 'Sin default'}")
    print(f"    Kind: {param.kind.name}")

# Informaci√≥n de retorno
return_annotation = sig.return_annotation
print(f"\nTipo de retorno: {return_annotation if return_annotation != inspect.Signature.empty else 'Sin anotar'}")

# Documentaci√≥n
print(f"\nDocumentaci√≥n:")
print(f"  {inspect.getdoc(procesar_datos)}")

# C√≥digo fuente (si est√° disponible)
try:
    source = inspect.getsource(procesar_datos)
    print(f"\nPrimeras l√≠neas del c√≥digo fuente:")
    lines = source.split('\n')[:5]
    for i, line in enumerate(lines, 1):
        print(f"  {i:2d}: {line}")
    print(f"  ... (total {len(source.split())} l√≠neas)")
except OSError:
    print("\nC√≥digo fuente no disponible")

# Ubicaci√≥n del archivo
try:
    file_info = inspect.getfile(procesar_datos)
    lineno = inspect.getsourcelines(procesar_datos)[1]
    print(f"\nUbicaci√≥n: {file_info}:{lineno}")
except OSError:
    print("\nUbicaci√≥n no disponible")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 2: Solo c√≥digo -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
import inspect
from abc import ABC, abstractmethod

class Vehiculo(ABC):
    """Clase base abstracta para veh√≠culos."""
    
    def __init__(self, marca: str, modelo: str):
        self.marca = marca
        self.modelo = modelo
        self._velocidad = 0
    
    @property
    def velocidad(self):
        """Velocidad actual del veh√≠culo."""
        return self._velocidad
    
    @abstractmethod
    def acelerar(self, incremento: int) -> None:
        """Acelera el veh√≠culo."""
        pass
    
    def informacion(self):
        """Devuelve informaci√≥n b√°sica."""
        return f"{self.marca} {self.modelo}"

class Coche(Vehiculo):
    """Implementaci√≥n concreta de un coche."""
    
    def __init__(self, marca: str, modelo: str, combustible: str = "gasolina"):
        super().__init__(marca, modelo)
        self.combustible = combustible
        self.max_velocidad = 200
    
    def acelerar(self, incremento: int = 10) -> None:
        """Acelera el coche respetando el l√≠mite m√°ximo."""
        nueva_velocidad = min(self._velocidad + incremento, self.max_velocidad)
        self._velocidad = nueva_velocidad
    
    def repostar(self, litros: float) -> str:
        """Reposta combustible."""
        return f"Repostados {litros}L de {self.combustible}"

# Crear instancia para an√°lisis
mi_coche = Coche("Toyota", "Corolla", "h√≠brido")

print("=== An√°lisis Introspectivo de Clases ===")

# Informaci√≥n de la clase
print(f"Clase: {Coche.__name__}")
print(f"Bases: {[base.__name__ for base in Coche.__bases__]}")
print(f"MRO: {[cls.__name__ for cls in Coche.__mro__]}")

# An√°lisis de miembros por categor√≠as
print(f"\n=== Miembros de la clase ===")

methods = []
properties = []
attributes = []

for name, value in inspect.getmembers(mi_coche):
    if name.startswith('_'):
        continue
        
    if inspect.ismethod(value):
        methods.append(name)
    elif isinstance(value, property):
        properties.append(name)
    elif not callable(value):
        attributes.append(name)

print(f"M√©todos p√∫blicos: {methods}")
print(f"Propiedades: {properties}")  
print(f"Atributos: {attributes}")

# An√°lisis detallado de m√©todos
print(f"\n=== An√°lisis de M√©todos ===")
for method_name in methods:
    method = getattr(mi_coche, method_name)
    sig = inspect.signature(method)
    
    print(f"\n{method_name}:")
    print(f"  Signatura: {sig}")
    print(f"  Documentaci√≥n: {inspect.getdoc(method) or 'Sin documentaci√≥n'}")
    
    # Verificar si es abstracto
    if hasattr(method, '__isabstractmethod__'):
        print(f"  ¬øAbstracto? {method.__isabstractmethod__}")

# Jerarqu√≠a de herencia detallada
print(f"\n=== Jerarqu√≠a de Herencia ===")
for i, cls in enumerate(Coche.__mro__):
    indent = "  " * i
    print(f"{indent}{cls.__name__}")
    if hasattr(cls, '__doc__') and cls.__doc__:
        print(f"{indent}  ‚îî‚îÄ {cls.__doc__.strip()}")

# An√°lisis de propiedades
print(f"\n=== Propiedades y Descriptors ===")
for name, value in inspect.getmembers(Coche):
    if isinstance(value, property):
        print(f"{name}:")
        if value.fget:
            print(f"  Getter: {inspect.getdoc(value.fget) or 'Sin documentaci√≥n'}")
        print(f"  Setter: {'S√≠' if value.fset else 'No'}")
        print(f"  Deleter: {'S√≠' if value.fdel else 'No'}")

# Estado actual del objeto
print(f"\n=== Estado del Objeto ===")
print(f"Atributos de instancia: {vars(mi_coche)}")
print(f"Tipo: {type(mi_coche).__name__}")
print(f"ID: {id(mi_coche)}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>

                <!-- Ejemplo 3: Caso avanzado -->
                <section>
                    <div class="code-container">
                        <pre><code class="python" data-trim>
import inspect
import ast
from typing import get_type_hints
from functools import wraps

class AnalizadorCodigo:
    """Analizador avanzado de c√≥digo y ejecuci√≥n."""
    
    @staticmethod
    def analizar_stack():
        """Analiza el stack de ejecuci√≥n actual."""
        stack = inspect.stack()
        
        print("=== Stack de Ejecuci√≥n ===")
        for i, frame_info in enumerate(stack[:5]):  # Primeros 5 frames
            print(f"Frame {i}:")
            print(f"  Funci√≥n: {frame_info.function}")
            print(f"  Archivo: {frame_info.filename.split('/')[-1]}")
            print(f"  L√≠nea: {frame_info.lineno}")
            if frame_info.code_context:
                print(f"  C√≥digo: {frame_info.code_context[0].strip()}")
            print()
    
    @staticmethod
    def analizar_variables_locales():
        """Examina variables en el contexto actual."""
        frame = inspect.currentframe().f_back
        
        print("=== Variables Locales ===")
        for name, value in frame.f_locals.items():
            if not name.startswith('_'):
                tipo = type(value).__name__
                valor_str = str(value)[:50] + "..." if len(str(value)) > 50 else str(value)
                print(f"  {name}: {tipo} = {valor_str}")
    
    @staticmethod
    def decorador_inspector(func):
        """Decorador que inspecciona las llamadas a funciones."""
        @wraps(func)
        def wrapper(*args, **kwargs):
            # Informaci√≥n de la llamada
            print(f"\nüîç Inspeccionando llamada a {func.__name__}")
            
            # An√°lisis de argumentos
            sig = inspect.signature(func)
            bound_args = sig.bind(*args, **kwargs)
            bound_args.apply_defaults()
            
            print("  Argumentos recibidos:")
            for param_name, value in bound_args.arguments.items():
                param = sig.parameters[param_name]
                tipo_esperado = param.annotation if param.annotation != inspect.Parameter.empty else "Any"
                print(f"    {param_name}: {value} (esperado: {tipo_esperado})")
            
            # An√°lisis del caller
            caller_frame = inspect.currentframe().f_back
            print(f"  Llamado desde: {caller_frame.f_code.co_name} l√≠nea {caller_frame.f_lineno}")
            
            # Ejecutar funci√≥n
            try:
                resultado = func(*args, **kwargs)
                print(f"  ‚úÖ Resultado: {resultado} (tipo: {type(resultado).__name__})")
                return resultado
            except Exception as e:
                print(f"  ‚ùå Error: {e}")
                raise
        
        return wrapper

# Funci√≥n de ejemplo para inspecci√≥n
@AnalizadorCodigo.decorador_inspector
def calcular_estadisticas(numeros: list, incluir_mediana: bool = True) -> dict:
    """Calcula estad√≠sticas b√°sicas de una lista."""
    if not numeros:
        raise ValueError("Lista vac√≠a")
    
    stats = {
        'count': len(numeros),
        'sum': sum(numeros),
        'mean': sum(numeros) / len(numeros),
        'min': min(numeros),
        'max': max(numeros)
    }
    
    if incluir_mediana:
        sorted_nums = sorted(numeros)
        n = len(sorted_nums)
        if n % 2 == 0:
            stats['median'] = (sorted_nums[n//2-1] + sorted_nums[n//2]) / 2
        else:
            stats['median'] = sorted_nums[n//2]
    
    return stats

# Funci√≥n que utiliza la funci√≥n anterior
def procesar_datos_numericos():
    """Funci√≥n que procesa diferentes conjuntos de datos."""
    print("Procesando conjuntos de datos...")
    
    # Variables locales para inspecci√≥n
    conjunto1 = [1, 2, 3, 4, 5]
    conjunto2 = [10, 20, 30, 40, 50, 60]
    multiplicador = 2
    
    # Analizar variables locales antes de procesamiento
    AnalizadorCodigo.analizar_variables_locales()
    
    # Procesar datos con inspecci√≥n autom√°tica
    resultado1 = calcular_estadisticas(conjunto1)
    resultado2 = calcular_estadisticas(conjunto2, incluir_mediana=False)
    
    # Analizar el stack en este punto
    AnalizadorCodigo.analizar_stack()
    
    return {
        'conjunto1': resultado1,
        'conjunto2': resultado2,
        'procesados': 2
    }

# Demostrar capacidades de introspecci√≥n avanzada
print("=== Demostraci√≥n de Introspecci√≥n Avanzada ===")

# An√°lisis de type hints
try:
    hints = get_type_hints(calcular_estadisticas)
    print("Type hints encontrados:")
    for param, tipo in hints.items():
        print(f"  {param}: {tipo}")
except Exception as e:
    print(f"Error obteniendo type hints: {e}")

# Ejecutar proceso con inspecci√≥n completa
resultado_final = procesar_datos_numericos()

print(f"\n=== Resultado Final ===")
print(f"Resultado del procesamiento: {resultado_final}")

# An√°lisis final del estado
print(f"\n=== An√°lisis Final ===")
current_frame = inspect.currentframe()
print(f"Frame actual: {current_frame.f_code.co_name}")
print(f"Variables globales definidas: {len([k for k in globals().keys() if not k.startswith('_')])}")
print(f"M√≥dulos importados: {len([k for k, v in globals().items() if inspect.ismodule(v)])}")
                        </code></pre>
                        <button class="run-button" onclick="runCode(this)">üî•üêç Ejecutar</button>
                        <div class="output"></div>
                    </div>
                </section>
            </section>

            <!-- CONCLUSI√ìN -->
            <section>
                <h2>Conclusi√≥n</h2>
                <ul>
                    <li class="fragment">Python incluye herramientas que otros lenguajes requieren librer√≠as externas
                    </li>
                    <li class="fragment">La filosof√≠a "batteries included" acelera el desarrollo significativamente</li>
                </ul>
                <br>
                <div class="fragment">
                    <h3>Pr√≥ximos pasos</h3>
                    <p><small>Explora estos m√≥dulos en tus proyectos reales</small></p>
                </div>
            </section>

            <!-- SLIDE FINAL -->
            <section>
                <h1>Gracias</h1>
                <h3>¬øPreguntas?</h3>
                <p class="center">
                    <small>Estos m√≥dulos est√°n disponibles en cualquier instalaci√≥n est√°ndar de Python</small>
                </p>
            </section>
        </div>
    </div>

    <!-- Scripts de Reveal.js -->
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/notes/notes.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/highlight/highlight.js"></script>

    <script>
        let pyodide;

        // Inicializar Pyodide
        async function main() {
            pyodide = await loadPyodide();
            console.log("Pyodide listo para ejecutar c√≥digo Python");
        }

        // Funci√≥n para ejecutar c√≥digo Python
        async function runCode(button) {
            const codeBlock = button.previousElementSibling.querySelector('code');
            const output = button.nextElementSibling;
            const code = codeBlock.textContent;

            if (!pyodide) {
                output.textContent = "Cargando Python...";
                output.className = "output loading";
                await main();
            }

            output.textContent = "Ejecutando...";
            output.className = "output loading";

            try {
                // Capturar stdout
                pyodide.runPython(`
import sys
from io import StringIO
sys.stdout = StringIO()
                `);

                // Ejecutar el c√≥digo del usuario
                pyodide.runPython(code);

                // Obtener la salida
                const stdout = pyodide.runPython("sys.stdout.getvalue()");

                // Restaurar stdout
                pyodide.runPython("sys.stdout = sys.__stdout__");

                output.textContent = stdout || "C√≥digo ejecutado (sin salida)";
                output.className = "output";
            } catch (err) {
                output.textContent = `Error: ${err.message}`;
                output.className = "output error";

                // Restaurar stdout en caso de error
                try {
                    pyodide.runPython("sys.stdout = sys.__stdout__");
                } catch (e) { }
            }
        }

        // Configuraci√≥n de Reveal.js
        Reveal.initialize({
            hash: true,
            plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
            transition: 'slide',
            backgroundTransition: 'fade',
            controls: true,
            progress: true,
            center: true,
            touch: true,
            loop: false,
            fragments: true,
            theme: 'moon',
            highlight: {
                highlightOnLoad: true,
                tabReplace: '  '
            }
        });

        // Cargar Pyodide al inicio
        main();
    </script>
</body>

</html>